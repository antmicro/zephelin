$name?="max780002"

using sysbus
mach create $name
machine LoadPlatformDescription @https://zephyr-dashboard.renode.io/zephyr_sim/54b826336bae437f851fcba332481e24a7e1532d/0e512aebf21a8c51bda51fa67354277811f10a40/max78002evkit_max78002_m4/hello_world/hello_world.repl
machine LoadPlatformDescriptionFromString "trivial_uart: UART.TrivialUart @ sysbus 0xD0000000"

showAnalyzer uart0

macro reset
"""
    sysbus LoadELF $elf
    cpu0 VectorTableOffset `sysbus GetSymbolAddress "_vector_table"`
"""
runMacro $reset
