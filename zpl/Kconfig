# Copyright (c) 2025 Analog Devices, Inc.
# Copyright (c) 2025 Antmicro <www.antmicro.com>
#
# SPDX-License-Identifier: Apache-2.0

rsource "profilers/Kconfig"
rsource "backends/Kconfig"
rsource "scopes/Kconfig"
rsource "conf/Kconfig"
rsource "conf/Kconfig.mute_traces"

config ZPL
	bool "Support for Zeppelin"
	help
	  Say 'Y' if you want to enable support for Zeppelin, the Zephyr AI
	  Profiling Library.

config ZPL_TRACE
	bool "Support for integration with Zephyr tracing subsystem"
	select TRACING

choice
	prompt "Zeppelin trace format"
	default ZPL_TRACE_FORMAT_PLAINTEXT
	depends on ZPL_TRACE

config ZPL_TRACE_FORMAT_PLAINTEXT
	bool "Plaintext format for Zeppelin trace"

config ZPL_TRACE_FORMAT_CTF
	bool "CTF format for Zeppelin trace"

endchoice

choice TRACING_FORMAT_CHOICE
	default TRACING_TEST if ZPL_TRACE_FORMAT_PLAINTEXT
	default TRACING_CTF if ZPL_TRACE_FORMAT_CTF
endchoice

config ZPL_TRACE_CTF_MAX_STR_LEN
	int "Maximum string length for CTF events"
	default 20
	depends on ZPL_TRACE_FORMAT_CTF

config ZPL_TRACE_CTF_MAX_LONG_STR_LEN
	int "Maximum long string length for CTF events"
	default 60
	depends on ZPL_TRACE_FORMAT_CTF

choice
	prompt "Zeppelin trace mode"
	default ZPL_TRACE_LAYER_PROFILING_MODE
	depends on ZPL_TRACE

config ZPL_TRACE_MINIMAL_MODE
	bool "Extremely lightweight profiling mode with no persistent trace"
	imply ZPL_INFERENCE_PROFILING
	imply ZPL_MEMORY_USAGE_TRACE

config ZPL_TRACE_LAYER_PROFILING_MODE
	bool "Layer-level timing with optional runtime hooks"
	imply ZPL_INFERENCE_PROFILING
	imply ZPL_MEMORY_USAGE_TRACE

config ZPL_TRACE_FULL_MODE
	bool "Full profiling mode that enables complete CTF tracing"
	imply ZPL_INFERENCE_PROFILING
	imply ZPL_MEMORY_USAGE_TRACE
	imply TRACING_SYSCALL
	imply TRACING_THREAD
	imply TRACING_WORK
	imply TRACING_ISR
	imply TRACING_SEMAPHORE
	imply TRACING_MUTEX
	imply TRACING_CONDVAR
	imply TRACING_QUEUE
	imply TRACING_FIFO
	imply TRACING_LIFO
	imply TRACING_STACK
	imply TRACING_MESSAGE_QUEUE
	imply TRACING_MAILBOX
	imply TRACING_PIPE
	imply TRACING_HEAP
	imply TRACING_MEMORY_SLAB
	imply TRACING_TIMER
	imply TRACING_EVENT
	imply TRACING_POLLING
	imply TRACING_PM
	imply TRACING_NETWORKING
	imply TRACING_NET_SOCKETS
	imply TRACING_NET_CORE
	imply TRACING_GPIO
	imply TRACING_IDLE

endchoice
