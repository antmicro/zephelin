# Copyright (c) 2025 Analog Devices, Inc.
# Copyright (c) 2025 Antmicro <www.antmicro.com>
#
# SPDX-License-Identifier: Apache-2.0

sample:
  name: marking_code_scopes
common:
  tags: profiling
tests:
  sample.trace.marking_code_scopes:
    harness: console
    harness_config:
      type: one_line
      regex:
        - "zpl_scope_enter \\d+ code_scope3"
        - "zpl_scope_exit \\d+ code_scope3"
        - "zpl_scope_enter \\d+ code_scope4"
        - "zpl_scope_exit \\d+ code_scope4"
  sample.trace.marking_code_scopes.plaintext.robot:
    harness: robot
    harness_config:
      robot_testsuite: marking_code_scopes_plaintext.robot
    extra_configs:
      - CONFIG_ZPL_RUNTIME_CONFIG_UART=y
  sample.trace.marking_code_scopes.ctf.robot:
    harness: robot
    harness_config:
      robot_testsuite: marking_code_scopes_ctf.robot
    extra_configs:
      - CONFIG_ZPL_RUNTIME_CONFIG_UART=n
      - CONFIG_ZPL_TRACE_FORMAT_CTF=y
      - CONFIG_BOOT_BANNER=n
      - CONFIG_PRINTK=n
