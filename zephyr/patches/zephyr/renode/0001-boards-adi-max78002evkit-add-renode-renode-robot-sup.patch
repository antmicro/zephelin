From 3c75ec5de9ba00e2cf785dc2b4fd6267fb24b36c Mon Sep 17 00:00:00 2001
From: Maciej Sobkowski <msobkowski@antmicro.com>
Date: Fri, 1 Aug 2025 13:03:57 +0200
Subject: [PATCH 1/3] boards: adi: max78002evkit: add renode/renode-robot
 support

Signed-off-by: Maciej Sobkowski <msobkowski@antmicro.com>
Signed-off-by: Krzysztof Sychla <ksychla@antmicro.com>
---
 boards/adi/max78002evkit/board.cmake          |  9 +++++++++
 .../max78002evkit_max78002_m4.yaml            |  7 +++++++
 .../adi/max78002evkit/support/max78002.resc   | 20 +++++++++++++++++++
 3 files changed, 36 insertions(+)
 create mode 100644 boards/adi/max78002evkit/support/max78002.resc

diff --git a/boards/adi/max78002evkit/board.cmake b/boards/adi/max78002evkit/board.cmake
index 42001337f58..00462d12be3 100644
--- a/boards/adi/max78002evkit/board.cmake
+++ b/boards/adi/max78002evkit/board.cmake
@@ -1,6 +1,15 @@
 # Copyright (c) 2024-2025 Analog Devices, Inc.
 # SPDX-License-Identifier: Apache-2.0
 
+set(SUPPORTED_EMU_PLATFORMS renode)
+set(RENODE_SCRIPT ${CMAKE_CURRENT_LIST_DIR}/support/max78002.resc)
+set(RENODE_UART sysbus.uart0)
+
+set_ifndef(BOARD_SIM_RUNNER renode)
+set_ifndef(BOARD_ROBOT_RUNNER renode-robot)
+include(${ZEPHYR_BASE}/boards/common/renode.board.cmake)
+include(${ZEPHYR_BASE}/boards/common/renode_robot.board.cmake)
+
 board_runner_args(jlink "--device=MAX78002" "--reset-after-load")
 
 include(${ZEPHYR_BASE}/boards/common/openocd-adi-max32.boards.cmake)
diff --git a/boards/adi/max78002evkit/max78002evkit_max78002_m4.yaml b/boards/adi/max78002evkit/max78002evkit_max78002_m4.yaml
index ffe89807e7a..29c2cdb1b50 100644
--- a/boards/adi/max78002evkit/max78002evkit_max78002_m4.yaml
+++ b/boards/adi/max78002evkit/max78002evkit_max78002_m4.yaml
@@ -22,3 +22,10 @@ supported:
   - flash
 ram: 384
 flash: 2560
+simulation:
+  - name: renode
+    exec: renode
+testing:
+  renode:
+    uart: sysbus.uart0
+    resc: boards/adi/max78002evkit/support/max78002.resc
diff --git a/boards/adi/max78002evkit/support/max78002.resc b/boards/adi/max78002evkit/support/max78002.resc
new file mode 100644
index 00000000000..012172c3fe0
--- /dev/null
+++ b/boards/adi/max78002evkit/support/max78002.resc
@@ -0,0 +1,20 @@
+$name?="max780002"
+
+using sysbus
+mach create $name
+machine LoadPlatformDescription @https://zephyr-dashboard.renode.io/zephyr_sim/54b826336bae437f851fcba332481e24a7e1532d/0e512aebf21a8c51bda51fa67354277811f10a40/max78002evkit_max78002_m4/hello_world/hello_world.repl
+machine LoadPlatformDescriptionFromString "trivial_uart: UART.TrivialUart @ sysbus 0xD0000000"
+machine LoadPlatformDescriptionFromString
+"""
+cpu0:
+    PerformanceInMips: 30
+"""
+
+showAnalyzer uart0
+
+macro reset
+"""
+    sysbus LoadELF $elf
+    cpu0 VectorTableOffset `sysbus GetSymbolAddress "_vector_table"`
+"""
+runMacro $reset
-- 
2.48.1

